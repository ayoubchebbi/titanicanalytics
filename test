public class CheckboxController {
    // Inner class to represent each checkbox
    public class CheckboxItem {
        public String id { get; set; }
        public String name { get; set; }
        public Boolean checked { get; set; }
    }

    // List of checkboxes
    public List<CheckboxItem> checkboxItems { get; set; }
    
    // List to store selected checkbox IDs
    public List<String> selectedCheckboxIds { get; set; }
    
    // ID of the current checkbox being clicked
    public String currentCheckboxId { get; set; }

    public CheckboxController() {
        // Initialize checkbox data
        checkboxItems = new List<CheckboxItem>{
            new CheckboxItem{ id = '1', name = 'Option 1', checked = false },
            new CheckboxItem{ id = '2', name = 'Option 2', checked = false },
            new CheckboxItem{ id = '3', name = 'Option 3', checked = false }
        };
        selectedCheckboxIds = new List<String>();
    }

    // Handle checkbox changes
    public void handleCheckboxChange() {
        // Find the checkbox that was clicked
        CheckboxItem clickedItem = checkboxItems
            .stream()
            .filter(item -> item.id == currentCheckboxId)
            .findFirst()
            .orElse(null);

        if (clickedItem != null) {
            if (clickedItem.checked) {
                // Add the ID to the list if checked
                if (!selectedCheckboxIds.contains(currentCheckboxId)) {
                    selectedCheckboxIds.add(currentCheckboxId);
                }
            } else {
                // Remove the ID from the list if unchecked
                selectedCheckboxIds.remove(currentCheckboxId);
            }
        }

        // Debug output (optional)
        System.debug('Updated Selected IDs: ' + selectedCheckboxIds);
    }
}
