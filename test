// Get all Custom Permissions assigned to the current user
Set<String> availableCPs = new Set<String>();

for (SetupEntityAccess sea : [SELECT SetupEntityId, SetupEntityType FROM SetupEntityAccess WHERE Parent.UserOrGroupId = :UserInfo.getUserId()]) {
    if (sea.SetupEntityType == 'CustomPermission') {
        availableCPs.add(sea.SetupEntityId);
    }
}

// Fetch CP names
List<CustomPermission> customPermissions = [SELECT Id, DeveloperName FROM CustomPermission WHERE Id IN :availableCPs];

System.debug('Custom Permissions for current user: ' + customPermissions);
